<!DOCTYPE html><meta charset=utf-8><title>LOTR Knowledge Graph - 3D VR Visualization</title><meta name=description content="Lord of the Rings Character Network - A-Frame VR Visualization"><meta name=viewport content="width=device-width, initial-scale=1"><script src=https://aframe.io/releases/1.5.0/aframe.min.js></script><script src=https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js></script><script src=A-Frame-Knowledge-Graph-Visualization-fresh.cbba908b.js></script><script src=A-Frame-Knowledge-Graph-Visualization-fresh.dc5094d7.js></script><script src=A-Frame-Knowledge-Graph-Visualization-fresh.4285d818.js></script><script src=A-Frame-Knowledge-Graph-Visualization-fresh.76e5a3af.js></script><style>body{margin:0;padding:0;overflow:hidden}#instructions{color:#fff;z-index:9999;background:#1e1e32e6;border:2px solid #7a84dd;border-radius:10px;max-width:250px;padding:15px 20px;font-family:Segoe UI,Arial,sans-serif;position:fixed;bottom:20px;left:20px}#instructions h3{color:#8acae5;margin:0 0 10px;font-size:14px}#instructions ul{margin:0;padding:0;list-style:none}#instructions li{color:#ccc;margin:6px 0;font-size:12px}#instructions li strong{color:#fff}#legend{color:#fff;z-index:9999;background:#1e1e32e6;border:2px solid #7a84dd;border-radius:10px;padding:15px 20px;font-family:Segoe UI,Arial,sans-serif;position:fixed;bottom:20px;right:20px}#legend h3{color:#8acae5;margin:0 0 10px;font-size:14px}.legend-item{align-items:center;margin:5px 0;font-size:12px;display:flex}.legend-color{border-radius:50%;width:12px;height:12px;margin-right:8px}#loading{color:#fff;text-align:center;z-index:10000;background:#1e1e32f2;border:2px solid #7a84dd;border-radius:10px;padding:30px 50px;font-family:Segoe UI,Arial,sans-serif;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}#loading h2{color:#8acae5;margin:0 0 10px}#loading.hidden{display:none}</style><body>
    
    <div id=loading>
      <h2>Loading Graph...</h2>
      <p>43 characters, 450 connections</p>
    </div>

    
    <div id=instructions>
      <h3>Desktop Controls</h3>
      <ul>
        <li><strong>WASD</strong> - Move around</li>
        <li><strong>Mouse</strong> - Look around</li>
        <li><strong>Hover</strong> - View character info</li>
        <li><strong>Click</strong> - Highlight connections</li>
        <li><strong>Click empty</strong> - Reset view</li>
      </ul>
      <h3 style=margin-top:12px>VR Controls</h3>
      <ul>
        <li><strong>VR Button</strong> - Enter VR mode</li>
        <li><strong>Gaze</strong> - Look at node to select</li>
        <li><strong>Trigger</strong> - Click / Teleport</li>
        <li><strong>Point</strong> - Aim at characters</li>
      </ul>
    </div>

    
    <div id=legend>
      <h3>Races</h3>
      <div class=legend-item>
        <div class=legend-color style=background:#bd9267></div>
        <span>Hobbits</span>
      </div>
      <div class=legend-item>
        <div class=legend-color style=background:#7a84dd></div>
        <span>Men</span>
      </div>
      <div class=legend-item>
        <div class=legend-color style=background:#8acae5></div>
        <span>Elves</span>
      </div>
      <div class=legend-item>
        <div class=legend-color style=background:#b15b60></div>
        <span>Dwarves</span>
      </div>
      <div class=legend-item>
        <div class=legend-color style=background:#3a7575></div>
        <span>Ainur (Wizards)</span>
      </div>
      <div class=legend-item>
        <div class=legend-color style=background:#e3845d></div>
        <span>Ents</span>
      </div>
      <div class=legend-item>
        <div class=legend-color style=background:#020104></div>
        <span>Orcs</span>
      </div>
    </div>

    
    <a-scene background="color: #222222" cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable, .graph-node" vr-mode-ui="enabled: true">
      
      <a-assets>
        <a-asset-item id=roboto-font src=https://cdn.aframe.io/fonts/Roboto-msdf.json></a-asset-item>
      </a-assets>

      
      <a-sky color=#222222 class=raycastable id=background></a-sky>

      
      <a-entity light="type: ambient; color: #ffffff; intensity: 0.6"></a-entity>

      
      <a-entity light="type: directional; color: #ffffff; intensity: 0.4" position="1 2 1"></a-entity>

      
      <a-entity id=cameraRig position="0 5 20" vr-mode-handler>
        <a-entity id=camera camera look-controls="pointerLockEnabled: true" wasd-controls="acceleration: 30; fly: true" position="0 1.6 0">
          
          <a-entity id=desktop-cursor cursor="fuse: false; rayOrigin: mouse" raycaster="far: 100; objects: .graph-node, .raycastable" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015" material="color: #8ACAE5; shader: flat; opacity: 0.8"></a-entity>

          
          <a-entity id=vr-gaze-cursor gaze-cursor="fuseTimeout: 1500; cursorColor: #8ACAE5" raycaster="far: 100; objects: .graph-node" visible=false></a-entity>

          
          <a-entity id=info-panel info-panel="width: 0.7; height: 0.7" position="0.55 -0.15 -1.2" visible=false></a-entity>
        </a-entity>
      </a-entity>

      
      <a-entity id=leftHand laser-controls="hand: left" raycaster="objects: .graph-node, .raycastable" teleport-controls="cameraRig: #cameraRig"></a-entity>
      <a-entity id=rightHand laser-controls="hand: right" raycaster="objects: .graph-node, .raycastable" line="color: #8ACAE5"></a-entity>

      
      <a-entity id=graph-container graph-loader="src: ./lotr_positioned.json; showLabels: true" graph-interaction="infoPanelId: info-panel; graphContainerId: graph-container" position="0 0 0"></a-entity>

    </a-scene>

    <script>document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("graph-container"),n=document.getElementById("loading");e&&(e.addEventListener("graph-loaded",function(e){console.log("Graph loaded:",e.detail),n&&n.classList.add("hidden")}),e.addEventListener("graph-error",function(e){console.error("Graph error:",e.detail),n&&(n.innerHTML="<h2>Error Loading Graph</h2><p>"+e.detail.error+"</p>")}))}),document.querySelector("a-scene").addEventListener("enter-vr",function(){console.log("Entered VR mode"),document.getElementById("instructions").style.display="none",document.getElementById("legend").style.display="none"}),document.querySelector("a-scene").addEventListener("exit-vr",function(){console.log("Exited VR mode"),document.getElementById("instructions").style.display="block",document.getElementById("legend").style.display="block"});</script>
  

