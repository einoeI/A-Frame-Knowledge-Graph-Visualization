AFRAME.registerComponent("gaze-cursor",{schema:{fuseTimeout:{type:"number",default:1500},cursorColor:{type:"color",default:"#8ACAE5"},cursorColorHover:{type:"color",default:"#046de7"},cursorScale:{type:"number",default:.02},distance:{type:"number",default:2}},init:function(){this.isHovering=!1,this.hoverStartTime=0,this.hoverTarget=null,this.fuseProgress=0,this.isVRMode=!1,this.createCursor(),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.el.addEventListener("raycaster-intersection",this.onIntersection),this.el.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.isVRMode=!0,this.el.setAttribute("visible",!0)},onExitVR:function(){this.isVRMode=!1,this.el.setAttribute("visible",!1),this.hoverTarget&&this.onIntersectionCleared()},createCursor:function(){this.centerDot=document.createElement("a-circle"),this.centerDot.setAttribute("radius",.4*this.data.cursorScale),this.centerDot.setAttribute("color",this.data.cursorColor),this.centerDot.setAttribute("position",`0 0 -${this.data.distance}`),this.centerDot.setAttribute("material","shader: flat; side: double"),this.el.appendChild(this.centerDot),this.progressRing=document.createElement("a-ring"),this.progressRing.setAttribute("radius-inner",.5*this.data.cursorScale),this.progressRing.setAttribute("radius-outer",.7*this.data.cursorScale),this.progressRing.setAttribute("color",this.data.cursorColor),this.progressRing.setAttribute("opacity",.5),this.progressRing.setAttribute("position",`0 0 -${this.data.distance}`),this.progressRing.setAttribute("material","shader: flat; side: double"),this.el.appendChild(this.progressRing)},onIntersection:function(t){if(!this.isVRMode)return;let e=t.detail.els[0];e&&e.classList.contains("graph-node")&&this.hoverTarget!==e&&(this.hoverTarget=e,this.hoverStartTime=Date.now(),this.isHovering=!0,this.centerDot.setAttribute("color",this.data.cursorColorHover),this.progressRing.setAttribute("color",this.data.cursorColorHover),e.emit("mouseenter"))},onIntersectionCleared:function(t){this.hoverTarget&&this.hoverTarget.emit("mouseleave"),this.isHovering=!1,this.hoverTarget=null,this.centerDot.setAttribute("color",this.data.cursorColor),this.progressRing.setAttribute("color",this.data.cursorColor)},tick:function(){},remove:function(){this.el.removeEventListener("raycaster-intersection",this.onIntersection),this.el.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.removeEventListener("exit-vr",this.onExitVR)}}),AFRAME.registerComponent("teleport-controls",{schema:{cameraRig:{type:"selector",default:"#cameraRig"},button:{type:"string",default:"trigger"},enabled:{type:"boolean",default:!0}},init:function(){this.isAiming=!1,this.targetPosition=new THREE.Vector3,this.createMarker(),this.onButtonDown=this.onButtonDown.bind(this),this.onButtonUp=this.onButtonUp.bind(this),this.el.addEventListener("triggerdown",this.onButtonDown),this.el.addEventListener("triggerup",this.onButtonUp),this.el.addEventListener("gripdown",this.onButtonDown),this.el.addEventListener("gripup",this.onButtonUp)},createMarker:function(){this.marker=document.createElement("a-entity");let t=document.createElement("a-ring");t.setAttribute("radius-inner",.4),t.setAttribute("radius-outer",.5),t.setAttribute("color","#8ACAE5"),t.setAttribute("rotation","-90 0 0"),t.setAttribute("material","shader: flat; opacity: 0.8"),this.marker.appendChild(t);let e=document.createElement("a-circle");e.setAttribute("radius",.3),e.setAttribute("color","#8ACAE5"),e.setAttribute("rotation","-90 0 0"),e.setAttribute("material","shader: flat; opacity: 0.5"),this.marker.appendChild(e),this.marker.setAttribute("visible",!1),this.el.sceneEl.appendChild(this.marker)},onButtonDown:function(t){this.data.enabled&&(this.isAiming=!0)},onButtonUp:function(t){if(this.data.enabled&&this.isAiming&&(this.isAiming=!1,this.marker.setAttribute("visible",!1),this.data.cameraRig&&this.targetPosition)){let t=this.data.cameraRig;t.setAttribute("position",{x:this.targetPosition.x,y:t.getAttribute("position").y,z:this.targetPosition.z})}},tick:function(){if(!this.isAiming)return;let t=this.el.components.raycaster;if(!t)return;let e=t.intersections;if(e.length>0)for(let t=0;t<e.length;t++){let i=e[t];this.targetPosition.copy(i.point),this.marker.setAttribute("position",this.targetPosition),this.marker.setAttribute("visible",!0);break}},remove:function(){this.el.removeEventListener("triggerdown",this.onButtonDown),this.el.removeEventListener("triggerup",this.onButtonUp),this.marker&&this.marker.parentNode&&this.marker.parentNode.removeChild(this.marker)}}),AFRAME.registerComponent("vr-mode-handler",{init:function(){this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){console.log("[VRModeHandler] Entered VR mode");let t=document.querySelector("[gaze-cursor]");t&&t.setAttribute("gaze-cursor","fuseTimeout",1500);let e=document.querySelector("[wasd-controls]");e&&e.setAttribute("wasd-controls","enabled",!1);let i=document.querySelector("#info-panel");i&&i.setAttribute("scale","1.5 1.5 1.5")},onExitVR:function(){console.log("[VRModeHandler] Exited VR mode");let t=document.querySelector("[wasd-controls]");t&&t.setAttribute("wasd-controls","enabled",!0);let e=document.querySelector("#info-panel");e&&e.setAttribute("scale","1 1 1")},remove:function(){this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.removeEventListener("exit-vr",this.onExitVR)}}),AFRAME.registerComponent("comfort-vignette",{schema:{enabled:{type:"boolean",default:!0},intensity:{type:"number",default:.5}},init:function(){this.data.enabled&&(this.vignette=document.createElement("a-entity"),this.vignette.setAttribute("geometry",{primitive:"ring",radiusInner:.3,radiusOuter:.6}),this.vignette.setAttribute("material",{color:"black",shader:"flat",opacity:0,transparent:!0,side:"double"}),this.vignette.setAttribute("position","0 0 -0.5"),this.el.appendChild(this.vignette),this.lastPosition=new THREE.Vector3,this.isMoving=!1)},tick:function(){if(!this.data.enabled||!this.vignette)return;let t=this.el.object3D.position,e=t.distanceTo(this.lastPosition)>.01;e&&!this.isMoving?(this.isMoving=!0,this.vignette.setAttribute("material","opacity",this.data.intensity)):!e&&this.isMoving&&(this.isMoving=!1,this.vignette.setAttribute("material","opacity",0)),this.lastPosition.copy(t)}}),console.log("[VRControls] Components registered: gaze-cursor, teleport-controls, vr-mode-handler, comfort-vignette");
//# sourceMappingURL=A-Frame-Knowledge-Graph-Visualization-fresh.0464a415.js.map
