<!DOCTYPE html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><title>LOTR Knowledge Graph - 2D Visualization</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js></script><style>*{box-sizing:border-box;margin:0;padding:0}body{color:#fff;background-color:#1a1a2e;font-family:Segoe UI,Arial,sans-serif;overflow:hidden}#mynetwork{background-color:#1a1a2e;width:100%;height:100vh}#legend{z-index:1000;background:#1e1e32f2;border:2px solid #7a84dd;border-radius:10px;padding:15px 20px;position:absolute;bottom:20px;left:20px}#legend h3{color:#8acae5;text-transform:uppercase;letter-spacing:1px;margin:0 0 12px;font-size:14px;font-weight:600}.legend-item{align-items:center;margin:8px 0;display:flex}.legend-color{border:1px solid #fff3;border-radius:50%;width:16px;height:16px;margin-right:10px}.legend-label{color:#e0e0e0;font-size:13px}#info-panel{z-index:1000;background:#1e1e32f2;border:2px solid #7a84dd;border-radius:10px;width:280px;padding:20px;display:none;position:absolute;top:20px;right:20px}#info-panel h3{color:#8acae5;border-bottom:1px solid #7a84dd4d;margin:0 0 15px;padding-bottom:10px;font-size:18px;font-weight:600}.info-row{justify-content:space-between;margin:10px 0;font-size:14px;display:flex}.info-label{color:#888;font-weight:500}.info-value{color:#e0e0e0;font-weight:400}.info-connections{border-top:1px solid #7a84dd4d;margin-top:15px;padding-top:10px}.info-connections h4{color:#8acae5;margin-bottom:8px;font-size:13px;font-weight:600}.connection-list{color:#aaa;max-height:120px;font-size:12px;overflow-y:auto}.connection-item{padding:3px 0}#instructions{z-index:1000;background:#1e1e32f2;border:2px solid #7a84dd;border-radius:10px;max-width:220px;padding:15px 20px;position:absolute;top:20px;left:20px}#instructions h3{color:#8acae5;margin:0 0 10px;font-size:14px;font-weight:600}#instructions ul{margin:0;padding:0;list-style:none}#instructions li{color:#aaa;margin:6px 0;font-size:12px;line-height:1.4}#instructions li strong{color:#e0e0e0}#title{z-index:1000;background:#1e1e32f2;border:2px solid #7a84dd;border-radius:10px;padding:10px 25px;position:absolute;top:20px;left:50%;transform:translate(-50%)}#title h1{color:#8acae5;margin:0;font-size:18px;font-weight:600}.connection-list::-webkit-scrollbar{width:6px}.connection-list::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.connection-list::-webkit-scrollbar-thumb{background:#7a84dd;border-radius:3px}</style><body>
    <div id=mynetwork></div>

    <div id=title>
        <h1>Lord of the Rings - Character Network</h1>
    </div>

    <div id=instructions>
        <h3>How to Explore</h3>
        <ul>
            <li><strong>Hover</strong> over nodes to see details</li>
            <li><strong>Click</strong> a node to highlight connections</li>
            <li><strong>Click background</strong> to reset</li>
            <li><strong>Scroll</strong> to zoom in/out</li>
            <li><strong>Drag</strong> to pan the view</li>
        </ul>
    </div>

    <div id=info-panel>
        <h3 id=char-name>Character Name</h3>
        <div class=info-row>
            <span class=info-label>Race:</span>
            <span class=info-value id=char-race>-</span>
        </div>
        <div class=info-row>
            <span class=info-label>Gender:</span>
            <span class=info-value id=char-gender>-</span>
        </div>
        <div class=info-row>
            <span class=info-label>Appearances:</span>
            <span class=info-value id=char-weight>-</span>
        </div>
        <div class=info-row>
            <span class=info-label>Connections:</span>
            <span class=info-value id=char-connections>-</span>
        </div>
        <div class=info-connections>
            <h4>Strongest Connections</h4>
            <div class=connection-list id=char-top-connections></div>
        </div>
    </div>

    <div id=legend>
        <h3>Races</h3>
        <div class=legend-item>
            <div class=legend-color style=background:#bd9267></div>
            <span class=legend-label>Hobbits</span>
        </div>
        <div class=legend-item>
            <div class=legend-color style=background:#7a84dd></div>
            <span class=legend-label>Men</span>
        </div>
        <div class=legend-item>
            <div class=legend-color style=background:#8acae5></div>
            <span class=legend-label>Elves</span>
        </div>
        <div class=legend-item>
            <div class=legend-color style=background:#b15b60></div>
            <span class=legend-label>Dwarves</span>
        </div>
        <div class=legend-item>
            <div class=legend-color style=background:#3a7575></div>
            <span class=legend-label>Ainur (Wizards)</span>
        </div>
        <div class=legend-item>
            <div class=legend-color style=background:#e3845d></div>
            <span class=legend-label>Ents</span>
        </div>
        <div class=legend-item>
            <div class=legend-color style=background:#020104></div>
            <span class=legend-label>Orcs</span>
        </div>
    </div>

    <script>const raceColors={men:"#7A84DD",elves:"#8ACAE5",hobbit:"#BD9267",dwarf:"#B15B60",ainur:"#3A7575",ents:"#E3845D",orcs:"#020104",animal:"#8ACAE5"},raceNames={men:"Men",elves:"Elves",hobbit:"Hobbit",dwarf:"Dwarf",ainur:"Ainur",ents:"Ent",orcs:"Orc",animal:"Animal"};let nodesData=[],edgesData=[],nodeMap={},network=null,nodes=null,edges=null,maxEdgeWeight=1;async function init(){try{console.log("Loading graph data...");let e=await fetch("./lotr_graph.json");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json();nodesData=t.nodes,edgesData=t.links.map(e=>({from:e.source,to:e.target,weight:e.weight})),console.log(`Loaded ${nodesData.length} nodes and ${edgesData.length} edges`),console.log("Metadata:",t.metadata),nodesData.forEach(e=>nodeMap[e.id]=e),initializeNetwork()}catch(e){console.error("Error loading graph data:",e),document.getElementById("mynetwork").innerHTML=`
                    <div style="color: white; padding: 50px; text-align: center;">
                        <h2>Error Loading Data</h2>
                        <p>${e.message}</p>
                        <p>Make sure you're running a local server (npm start)</p>
                    </div>
                `}}function initializeNetwork(){let e=Math.max(...nodesData.map(e=>e.weight));nodes=new vis.DataSet(nodesData.map(t=>({id:t.id,label:t.label,color:{background:raceColors[t.race]||"#7A84DD",border:raceColors[t.race]||"#7A84DD",highlight:{background:"#046de7",border:"#046de7"},hover:{background:raceColors[t.race]||"#7A84DD",border:"#ffffff"}},size:10+t.weight/e*40,font:{color:"white",size:14},shape:"dot",borderWidth:2,borderWidthSelected:3}))),maxEdgeWeight=Math.max(...edgesData.map(e=>e.weight)),edges=new vis.DataSet(edgesData.map(e=>({from:e.from,to:e.to,value:e.weight,color:{color:"rgba(150, 150, 150, 0.4)",highlight:"#046de7",hover:"rgba(150, 150, 150, 0.6)"},width:1+e.weight/maxEdgeWeight*3})));let t=document.getElementById("mynetwork");(network=new vis.Network(t,{nodes,edges},{physics:{barnesHut:{gravitationalConstant:-5e3,centralGravity:0,springLength:200,springConstant:.009,damping:.025,avoidOverlap:0},stabilization:{enabled:!0,iterations:1e3,updateInterval:50,fit:!0}},interaction:{hover:!0,tooltipDelay:0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1},nodes:{shape:"dot"},edges:{smooth:{enabled:!0,type:"continuous"}}})).once("stabilizationIterationsDone",function(){network.setOptions({physics:!1}),console.log("Stabilization complete - physics disabled")}),setupEventListeners()}function setupEventListeners(){network.on("hoverNode",function(e){showInfoPanel(e.node)}),network.on("blurNode",function(){hideInfoPanel()}),network.on("selectNode",function(e){highlightConnections(e.nodes[0])}),network.on("deselectNode",function(){resetHighlight()})}function getNodeConnections(e){let t=[];return edgesData.forEach(o=>{o.from===e?t.push({id:o.to,weight:o.weight}):o.to===e&&t.push({id:o.from,weight:o.weight})}),t.sort((e,t)=>t.weight-e.weight)}function showInfoPanel(e){let t=nodeMap[e];if(!t)return;let o=getNodeConnections(e);document.getElementById("char-name").textContent=t.label,document.getElementById("char-race").textContent=raceNames[t.race]||t.race,document.getElementById("char-gender").textContent=t.gender?t.gender.charAt(0).toUpperCase()+t.gender.slice(1):"-",document.getElementById("char-weight").textContent=t.weight,document.getElementById("char-connections").textContent=void 0!==t.total_connections?t.total_connections:o.length;let n=o.slice(0,5).map(e=>{let t=nodeMap[e.id],o=t?t.label:e.id;return`<div class="connection-item">${o} (${e.weight})</div>`}).join("");document.getElementById("char-top-connections").innerHTML=n,document.getElementById("info-panel").style.display="block"}function hideInfoPanel(){document.getElementById("info-panel").style.display="none"}function highlightConnections(e){let t=network.getConnectedNodes(e),o=network.getConnectedEdges(e),n=nodesData.map(o=>o.id===e||t.includes(o.id)?{id:o.id,opacity:1,color:{background:o.id===e?"#046de7":raceColors[o.race],border:o.id===e?"#046de7":raceColors[o.race]}}:{id:o.id,opacity:.2,color:{background:"rgba(100,100,100,0.3)",border:"rgba(100,100,100,0.3)"}});nodes.update(n);let a=edges.get().map(e=>o.includes(e.id)?{id:e.id,color:{color:"#046de7",opacity:.8},width:3}:{id:e.id,color:{color:"rgba(150,150,150,0.1)"},width:1});edges.update(a)}function resetHighlight(){let e=nodesData.map(e=>({id:e.id,opacity:1,color:{background:raceColors[e.race]||"#7A84DD",border:raceColors[e.race]||"#7A84DD",highlight:{background:"#046de7",border:"#046de7"}}}));nodes.update(e);let t=edges.get().map(e=>({id:e.id,color:{color:"rgba(150, 150, 150, 0.4)",highlight:"#046de7"},width:1+e.value/maxEdgeWeight*3}));edges.update(t)}document.addEventListener("DOMContentLoaded",init);</script>


